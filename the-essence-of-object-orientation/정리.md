# 📖 객체지향의 사실과 오해

<div align = "center">
   <a href="https://www.yes24.com/Product/Goods/18249021">
<img src="https://raw.githubusercontent.com/buinq/imageServer/main/img/image-20230601192930160.png" alt="image-20230601192930160" style="width:30%;" />
  </a>
</div>

<br>

**객체 지향에 대한 자신만의 견해를 갖는데 도움을 받기 위해 읽기 시작했습니다.**

<br>

## 객체지향과 객체



객체 지향이란, '**시스템을**' '**상호작용하는 자율적인 객체들의 공동체**'로  바라보고 객체를 이용해 시스템을 분할하는 방법이다.

자율적인 객체란 **상태** 와 **행위**를 함께 지니며 스스로 자기 자신을 책임지는 객체를 의미한다.

<br>

객체는 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다. 

> '어떠한 객체도 섬이 아니다.'
>
> 객체는 자신에게 주어진 역할과 책임을 다하는 동시에 적극적으로 협력해야한다.

<br>

각 객체는 협력 내에서 정해진 **역할**을 수행한다.

<br>

객체는 다른 객체와 **협력하기 위해 메시지를 전송**하고, 메시지를 수신한 객체는 **적합한 메서드를 자율적으로 선택**한다.

> 적합한 메서드를 자율적으로 선택 : 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력을 다형성이라고 할 수 있다.
>
> 객체는 다른 객체가 '무엇(what)'을 수행하는지는 알지만 '어떻게(how)' 수행하는지는 알 수 없다.

<br>

### 📌 상태와 행위

**어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다.**

예로, 텔레비전 전원을 켜는 행동이 없으면, 채널을 변경하는 행동은 의미가 없어지고 자동차에 시동을 걸지 않았다면 어떠한 버튼을 눌러도 의미가 없는 것 처럼 말이다.

<br>

**과거의 모든 행동 이력을 설명하지 않고 과거에 어떤 행동들이 일어났는지 확인할 수 있는 방법은 상태를 확인하는 것이다.**

텔레비젼에 전원이 켜져있는가? 자동차에 시동이 걸려있는가? 와 같은 상태를 말이다.

<br>

모든 객체는 **단순한 값**과 **다른 객체**로 이루어져 있다.

예로, 키가 160cm 인 엘리스가 500ml 음료수를 들고 있을 때, 160cm라는 값을 가진 엘리스 객체와 500ml라는 값을 가진 음료수 객체가 연결되어 있는 것이다.

**이렇게 객체 간 연결되어 있을 때, 서로 협력할 수 있다.**

엘리스가 음료를 들고 있어야, 마셔서 500ml 였던 음료가 300ml로 만들 수 있는 것 처럼 말이다.

<br>
여기서 음료수를 마시는 행위를 했기 때문에, 음료수 객체의 상태는 변경되었다.

**객체의 행동은 객체의 상태를 변화시키면서 객체의 상태에 의존적임을 알 수 있다.**

<br>
현실 세계에서의 객체와 객체지향 세계의 객체의 가장 큰 차이점은, 모든 객체는 자신의 상태를 자신이 변화시킨다는 것이다.

엘리스가 음료수를 마셔서 음료수의 양(상태)를 변경시킨 것은

`엘리스.drink(음료)` 로 엘리스가 주체가 되어 음료의 양을 변경시키는 것이 아니라

`음료.drunken(양)` 으로 음료에게 음료가 가진 양을 변경시키는 메서드를 실행 요청하는 것이다.

**객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다. 객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.**

자율적인 객체는 스스로 판단과 결정을 하고, 객체가 자율적일 수록 협력은 유연하고 간결해진다.

<br>



### 📌 다형성과 캡슐화

<br>

객체의 타입을 결정하는 것은 객체의 행동 뿐이다. **객체가 어떤 데이터를 보유하고 있는지는 타입을 결정하는 데 아무런 영향도 미치지 않는다.**

같은 타입에 속한 객체는 **행동만 동일**하다면 **서로 다른 데이터를 가질 수 있다.**

동일한 행동 = 동일한 책임 = 동일한 메세지 수신

<br>

내부 표현이 다르기 때문에, 메세지를 수신해서 처리하는 방식은 다를 수 밖에 없고 **자율적으로 처리**한다.

이것은 **다형성**에 의미를 부여한다.

<br>

행동만이 고려 사항이기 때문에, 훌륭한 객체지향 설계는 **외부에 행동만을 제공**하고 **데이터는 행동 뒤로 감춰야 한다.**

이것은 **캡슐화**를 의미한다.

<br>

### 📌 객체의 모양을 결정하는 협력

<br>

올바른 객체를 설계하기 위해서는 **먼저 견고하고 깔끔한 협력을 설계해야 한다.** 

**협력을 설계한다는 것**은 설계에 참여하는 **객체들이 주고받을 요청과 응답의 흐름을 결정**한다는 것을 의미한다.

<br>

그리고 객체가 **외부에 제공하게 될 행동인 책임을 할당**한다.

<br>

행동을 결정했다면, 그 **행동을 수행하는데 필요한 데이터**가 무엇인지 고민한다.

<br>

필요한 행동과 데이터를 결정하고 나면 클래스를 어떻게 구현할지 고민하면된다.

<br>

### 📌 테스트 주도 개발의 효과

<br>

이 책에서 계속 강조하는 부분은, 객체는 역할과 책임을 먼저 생각하고 협력관계를 생각하며 만들어져야 한다고 한다.

테스트 주도 개발(TDD) 방식으로 코드를 만들면 테스트를 작성하기 위해, 객체의 메서드를 호출하고 반환값을 검증하는 과정에서 **객체가 수행해야 하는 책임에 대해 먼저 생각**하게 된다.

테스트에 필요한 간접 입력 값을 제공하기 위해 스텁을 추가하거나 

출력 값을 검증하기 위해 목 객체를 사용하는 것이 객체와 협력해야 하는 협력자에 관해 고민한 결과를 코드로 나타낸 것이기 때문이다.

따라서, **TDD는 테스트를 잘 작성하도록 하기위한 기법이 아니라 역할과 협력을 중심으로한 객체 지향적 사고를 먼저 하도록 도와주는 기법**인 것이다.

<br>

### 📌 객체 지향의 핵심, 메시지

<br>

객체 지향의 기본 개념은, **책임을 수행하는 자율적인 객체들의 협력**을 통해 애플리케이션을 구축하는 것이다.

그리고 자율적인 객체는 책임을 **어떻게 수행하는가** 를 설명하지 않고 **무엇을 하는가** 를 중점으로 수행하고 협력한다.

이러한 협력은 **메세지를 전송함**으로서 객체들 간에 소통하고 상호작용을 한다.

다른 객체의 협력이 필요하면 메세지를 전송하고, 메세지를 수신한 객체는 정의된 방법에 따라 메시지를 처리한다.

즉, 객체 지향의 강력함은 객체들이 주고받는 메시지로부터 나온다.

클래스는 단지, 객체를 표현하기 위한 수단이고 객체의 속성과 행위를 담는 틀일 뿐이다.

따라서, 클래스를 정의하는 것이 먼저가 아니라 객체들의 속성과 행위를 식별하는 것이 먼저다.

훌륭한 객체지향 설계는 **어떤 객체가 어떤 메시지를 전송할 수 있는가**와 **어떤 객체가 어떤 메세지를 이해할 수 있는가**를 중심으로 협력 관계를 구성하는 것이다.

